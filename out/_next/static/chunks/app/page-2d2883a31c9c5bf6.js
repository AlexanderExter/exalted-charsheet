(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{191:(e,s,t)=>{"use strict";t.d(s,{default:()=>k});var a=t(5155),l=t(2115);let n=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},r=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,l.forwardRef)((e,s)=>{let{color:t="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:x,...u}=e;return(0,l.createElement)("svg",{ref:s,...i,width:a,height:a,stroke:t,strokeWidth:d?24*Number(n)/Number(a):n,className:r("lucide",c),...!o&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[s,t]=e;return(0,l.createElement)(s,t)}),...Array.isArray(o)?o:[o]])}),c=(e,s)=>{let t=(0,l.forwardRef)((t,a)=>{let{className:i,...c}=t;return(0,l.createElement)(d,{ref:a,iconNode:s,className:r("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return t.displayName=n(e),t},o=c("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),x=c("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),u=c("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=c("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=c("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),p=c("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),g=c("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),b=c("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),y=c("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),j=c("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),v=c("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),f=c("scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),N=c("construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]),w=c("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),C=c("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),k=()=>{var e,s,t,n,r,i,d,c,k,M,A,P,D,I,S,B,E,T,z,R,L,O,V,K,q,W,H,F,U,_,J,X,Z,$,G,Q,Y,ee,es,et,ea,el,en,er,ei,ed,ec,eo;let[ex,eu,em]=function(e,s){let[t,a]=(0,l.useState)(s),[n,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{try{let s=localStorage.getItem(e);null!==s&&a(JSON.parse(s))}catch(s){console.warn('Error reading localStorage key "'.concat(e,'":'),s)}finally{r(!0)}},[e]),[t,s=>{try{let l=s instanceof Function?s(t):s;a(l),localStorage.setItem(e,JSON.stringify(l))}catch(s){console.warn('Error setting localStorage key "'.concat(e,'":'),s)}},n]}("exalted-characters",[]),[eh,ep]=(0,l.useState)(null),[eg,eb]=(0,l.useState)(!0),[ey,ej]=(0,l.useState)(""),[ev,ef]=(0,l.useState)(!1),[eN,ew]=(0,l.useState)("core"),[eC,ek]=(0,l.useState)("none"),[eM,eA]=(0,l.useState)(!1),eP=(0,l.useRef)(null),eD=(0,l.useRef)(null),eI=e=>({id:Date.now(),name:e,attributes:{fortitude:{base:1,added:0,bonus:0},finesse:{base:1,added:0,bonus:0},force:{base:1,added:0,bonus:0}},abilities:{athletics:{base:0,added:0,bonus:0},awareness:{base:0,added:0,bonus:0},closeCombat:{base:0,added:0,bonus:0},craft:{base:0,added:0,bonus:0},embassy:{base:0,added:0,bonus:0},integrity:{base:0,added:0,bonus:0},navigate:{base:0,added:0,bonus:0},physique:{base:0,added:0,bonus:0},presence:{base:0,added:0,bonus:0},performance:{base:0,added:0,bonus:0},rangedCombat:{base:0,added:0,bonus:0},sagacity:{base:0,added:0,bonus:0},stealth:{base:0,added:0,bonus:0},war:{base:0,added:0,bonus:0}},essence:{motes:5,commitments:0,spent:0,anima:0,rating:1},staticValues:{defenseModifier:0,evasionModifier:0,parryModifier:0,resolveModifier:0,soakModifier:0,hardnessModifier:0},health:{baseline:{zero:2,minusOne:2,minusTwo:2,incap:1},oxBodyLevels:0,exaltType:"lunar",bashingDamage:0,lethalDamage:0,aggravatedDamage:0,dramaticInjuries:[]},armor:[],weapons:[],milestones:{personal:0,exalt:0,minor:0,major:0},advancement:[],dicePool:{attribute:"fortitude",ability:"athletics",targetNumber:7,doublesThreshold:10,extraDiceBonus:0,extraDiceNonBonus:0,extraSuccessBonus:0,extraSuccessNonBonus:0},charms:[],spells:[],combat:{power:0,joinBattleBonus:0},social:{virtues:{major:null,minor:null},intimacies:[]},rulings:[]});(0,l.useEffect)(()=>{let e=localStorage.getItem("exalted-characters");if(e){let s=JSON.parse(e).map(e=>({...eI(e.name),...e,essence:{motes:5,commitments:0,spent:0,anima:0,rating:1,...e.essence},staticValues:{defenseModifier:0,evasionModifier:0,parryModifier:0,resolveModifier:0,soakModifier:0,hardnessModifier:0,...e.staticValues},health:{baseline:{zero:2,minusOne:2,minusTwo:2,incap:1},oxBodyLevels:0,exaltType:"lunar",bashingDamage:0,lethalDamage:0,aggravatedDamage:0,dramaticInjuries:[],...e.health||{}},armor:e.armor||[],weapons:e.weapons||[],milestones:{personal:0,exalt:0,minor:0,major:0,...e.milestones},advancement:e.advancement||[],dicePool:e.dicePool||{attribute:"fortitude",ability:"athletics",targetNumber:7,doublesThreshold:10,extraDiceBonus:0,extraDiceNonBonus:0,extraSuccessBonus:0,extraSuccessNonBonus:0},charms:e.charms||[],spells:e.spells||[],combat:e.combat||{power:0,joinBattleBonus:0},social:e.social?Array.isArray(e.social.virtues)?{virtues:{major:e.social.virtues[0]||null,minor:e.social.virtues[1]||null},intimacies:e.social.intimacies||[]}:{virtues:e.social.virtues||{major:null,minor:null},intimacies:e.social.intimacies||[]}:{virtues:{major:null,minor:null},intimacies:[]},rulings:e.rulings||[]}));eu(s),s.length>0&&(ep(s[0]),eb(!1))}},[eu]),(0,l.useEffect)(()=>{ex.length>0&&localStorage.setItem("exalted-characters",JSON.stringify(ex))},[ex]);let eS=()=>{if(!ey.trim())return;let e=eI(ey.trim());eu(s=>[...s,e]),ep(e),ej(""),eb(!1)},eB=e=>{try{let s=JSON.stringify(e,null,2),t=new Blob([s],{type:"application/json"}),a=document.createElement("a"),l=window.URL.createObjectURL(t);a.href=l,a.download="".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_exalted_character.json"),a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),window.URL.revokeObjectURL(l)},100)}catch(e){console.error("Export error:",e),alert("Failed to export character. Please try again.")}},eE=e=>{let s=e.target.files[0];if(!s)return;let t=new FileReader;t.onload=s=>{try{var t;let a=JSON.parse(null==(t=s.target)?void 0:t.result),l=(Array.isArray(a)?a:[a]).map(e=>{if(!e.name)throw Error("Invalid character data: missing name");let s=Date.now()+Math.random();return{...eI(e.name),...e,id:s}});eu(e=>[...e,...l]),1===l.length&&(ep(l[0]),eb(!1)),e.target.value="",alert("Successfully imported ".concat(l.length," character(s)"))}catch(s){console.error("Import error:",s),alert("Failed to import character(s). Please ensure the file is a valid character export."),e.target.value=""}},t.readAsText(s)},eT=(e,s,t,a)=>{let l=Math.max(0,parseInt(a)||0);ep(a=>({...a,[e]:{...a[e],[s]:{...a[e][s],[t]:l}}})),eu(a=>a.map(a=>a.id===eh.id?{...a,[e]:{...a[e],[s]:{...a[e][s],[t]:l}}}:a))},ez=(e,s)=>{let t=Math.max(0,parseInt(s)||0);ep(s=>({...s,essence:{...s.essence,[e]:t}})),eu(s=>s.map(s=>s.id===eh.id?{...s,essence:{...s.essence,[e]:t}}:s))},eR=e=>e.base+e.added+e.bonus,eL=()=>{if(!(null==eh?void 0:eh.essence))return 0;let{motes:e,commitments:s,spent:t}=eh.essence;return e-s-t},eO=()=>{if(!(null==eh?void 0:eh.essence))return 0;let{motes:e,commitments:s}=eh.essence;return e-s},eV=e=>e<=2?"Dim":e<=4?"Glowing":e<=6?"Burning":e<=9?"Bonfire":"Iconic",eK=e=>{let s=[];return e>=3&&s.push("Anima Active Effect available"),e>=5&&s.push("Exalted nature can't be hidden"),s},eq=(e,s,t)=>{if(!(null==eh?void 0:eh.advancement))return;let a={...eh,advancement:eh.advancement.map(a=>a.id===e?{...a,[s]:t}:a)};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},eW=()=>{if(!(null==eh?void 0:eh.attributes))return 0;let{fortitude:e,finesse:s,force:t}=eh.attributes;return Math.max(eR(e),eR(s),eR(t))},eH=()=>{var e,s;return(null==eh||null==(e=eh.abilities)?void 0:e.athletics)?Math.max(0,Math.ceil((eR(eh.abilities.athletics)+eW())/2)+Math.max(-5,Math.min(5,(null==eh||null==(s=eh.staticValues)?void 0:s.evasionModifier)||0))):0},eF=()=>{var e,s;return(null==eh||null==(e=eh.abilities)?void 0:e.closeCombat)?Math.max(0,Math.ceil((eR(eh.abilities.closeCombat)+eW())/2)+Math.max(-5,Math.min(5,(null==eh||null==(s=eh.staticValues)?void 0:s.parryModifier)||0))):0},eU=()=>{var e,s;if(!(null==eh||null==(e=eh.abilities)?void 0:e.integrity))return 2;let t=eR(eh.abilities.integrity),a=2;return t>=1&&(a+=1),t>=3&&(a+=2),Math.max(0,a+Math.max(-5,Math.min(5,(null==eh||null==(s=eh.staticValues)?void 0:s.resolveModifier)||0)))},e_=()=>{var e,s,t;let a=(null==eh||null==(e=eh.health)?void 0:e.baseline)||{zero:2,minusOne:2,minusTwo:2,incap:1},l=Math.max(0,Math.min(5,(null==eh||null==(s=eh.health)?void 0:s.oxBodyLevels)||0)),n=(null==eh||null==(t=eh.health)?void 0:t.exaltType)||"lunar",r=0,i=0;return"lunar"===n&&(r=2*l,i=+l),{zero:a.zero+r,minusOne:a.minusOne+i,minusTwo:a.minusTwo,incap:a.incap,total:a.zero+r+a.minusOne+i+a.minusTwo+a.incap}},eJ=()=>{var e,s,t;let a=e_(),l=(null==eh||null==(e=eh.health)?void 0:e.bashingDamage)||0,n=l+((null==eh||null==(s=eh.health)?void 0:s.lethalDamage)||0)+((null==eh||null==(t=eh.health)?void 0:t.aggravatedDamage)||0);return 0===n||n<=a.zero?0:n<=a.zero+a.minusOne?-1:n<=a.zero+a.minusOne+a.minusTwo?-2:-99},eX=(e,s,t)=>{if(!(null==eh?void 0:eh.armor))return;let a={...eh,armor:eh.armor.map(a=>a.id===e?{...a,[s]:t}:a)};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},eZ=()=>((null==eh?void 0:eh.armor)||[]).reduce((e,s)=>e+(parseInt(s.soak)||0),0),e$=()=>((null==eh?void 0:eh.armor)||[]).reduce((e,s)=>e+(parseInt(s.hardness)||0),0),eG=(e,s,t)=>{if(!(null==eh?void 0:eh.weapons))return;let a={...eh,weapons:eh.weapons.map(a=>a.id===e?{...a,[s]:t}:a)};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},eQ=(e,s)=>{let t={...eh,health:{baseline:{zero:2,minusOne:2,minusTwo:2,incap:1},oxBodyLevels:0,exaltType:"lunar",bashingDamage:0,lethalDamage:0,aggravatedDamage:0,dramaticInjuries:[],...eh.health,[e]:s}};ep(t),eu(e=>e.map(e=>e.id===eh.id?t:e))},eY=()=>{let e=(null==eh?void 0:eh.advancement)||[],s={planned:0,personal:0,exalt:0,minor:0,major:0};return e.forEach(e=>{switch(e.status){case"Planned":s.planned++;break;case"Paid with Personal":s.personal++;break;case"Paid with Exalt":s.exalt++;break;case"Paid with Minor":s.minor++;break;case"Paid with Major":s.major++}}),s},e0=(e,s)=>{let t={...eh,milestones:{...eh.milestones,[e]:Math.max(0,parseInt(s)||0)}};ep(t),eu(e=>e.map(e=>e.id===eh.id?t:e))},e1=(e,s)=>{let t=Math.max(-5,Math.min(5,parseInt(s)||0)),a={...eh,staticValues:{...eh.staticValues,[e]:t}};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},e2=(e,s,t)=>{if(!(null==eh?void 0:eh.charms))return;let a={...eh,charms:eh.charms.map(a=>a.id===e?{...a,[s]:t}:a)};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},e3=(e,s,t)=>{if(!(null==eh?void 0:eh.spells))return;let a={...eh,spells:eh.spells.map(a=>a.id===e?{...a,[s]:t}:a)};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},e5=(e,s)=>{if(!(null==eh?void 0:eh.dicePool))return;let t={...eh,dicePool:{...eh.dicePool,[e]:s}};ep(t),eu(e=>e.map(e=>e.id===eh.id?t:e))},e6=()=>{if(!(null==eh?void 0:eh.dicePool)||!(null==eh?void 0:eh.attributes)||!(null==eh?void 0:eh.abilities))return{basePool:0,extraDice:0,totalPool:0,cappedBonusDice:0,actionPhrase:"Roll 0, TN 7 Double 10s"};let{attribute:e,ability:s,targetNumber:t,doublesThreshold:a,extraSuccessBonus:l,extraSuccessNonBonus:n}=eh.dicePool,r=eR(eh.attributes[e]||{base:0,added:0,bonus:0})+eR(eh.abilities[s]||{base:0,added:0,bonus:0}),{extraDiceBonus:i,extraDiceNonBonus:d}=eh.dicePool,c=Math.min(i||0,10),o=c+(d||0),x=r+o,u=(l||0)+(n||0),m="Roll ".concat(x);return u>0&&(m+=", ".concat(u," success in")),m+=", TN ".concat(t),a<10?m+=" Double ".concat(a,"s"):m+=" Double 10s",{basePool:r,extraDice:o,totalPool:x,cappedBonusDice:c,actionPhrase:m}},e4=(e,s)=>{let t=parseInt(s)||0,a={...eh,combat:{...eh.combat,[e]:t}};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},e7=(e,s)=>{var t;if(!eh)return;let a={...eh,social:{...eh.social,virtues:{...null==(t=eh.social)?void 0:t.virtues,[e]:s}}};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},e8=function(){var e;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tie";if(!eh)return;let t={id:Date.now(),intimacy:"",type:s,strength:"Minor"},a={...eh,social:{...eh.social,intimacies:[...(null==(e=eh.social)?void 0:e.intimacies)||[],t]}};ep(a),eu(e=>e.map(e=>e.id===eh.id?a:e))},e9=(e,s,t)=>{var a;if(!eh)return;let l={...eh,social:{...eh.social,intimacies:((null==(a=eh.social)?void 0:a.intimacies)||[]).map(a=>a.id===e?{...a,[s]:t}:a)}};ep(l),eu(e=>e.map(e=>e.id===eh.id?l:e))},se=e=>{var s;if(!eh)return;let t={...eh,social:{...eh.social,intimacies:((null==(s=eh.social)?void 0:s.intimacies)||[]).filter(s=>s.id!==e)}};ep(t),eu(e=>e.map(e=>e.id===eh.id?t:e))};if(eM)return(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6 bg-gray-50 min-h-screen",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("button",{onClick:()=>{eA(!1),eh||eb(!0)},className:"mb-4 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"← Back"}),(0,a.jsx)("div",{className:"prose max-w-none",children:(e=>{let s=e.trim().split("\n"),t=[];return s.forEach((e,s)=>{e.startsWith("# ")?t.push((0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:e.substring(2)},s)):e.startsWith("## ")?t.push((0,a.jsx)("h2",{className:"text-xl font-semibold mb-2 mt-4",children:e.substring(3)},s)):e.trim()&&t.push((0,a.jsx)("p",{className:"mb-2",children:e},s))}),t})("# Exalted: Essence Character Manager\n\n## Overview\nThis is a character management application for the Exalted: Essence tabletop role-playing game. It allows you to create, manage, and track character progression.\n\n## Features\n- Character creation and management\n- Attribute and ability tracking\n- Essence management\n- Health tracking\n- Armor and weapon management\n- Dice pool calculator\n- Import/export functionality")})]})});if(eg||!eh)return(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6 bg-gray-50 min-h-screen",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Exalted: Essence Character Manager"}),(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)("button",{onClick:()=>eA(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"About"})}),(0,a.jsxs)("div",{className:"mb-6 flex justify-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{var e;return null==(e=eP.current)?void 0:e.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[(0,a.jsx)(o,{size:18}),"Import Character(s)"]}),(0,a.jsx)("input",{ref:eP,type:"file",accept:".json",onChange:eE,className:"hidden"}),ex.length>0&&(0,a.jsxs)("button",{onClick:()=>{try{let e=JSON.stringify(ex,null,2),s=new Blob([e],{type:"application/json"}),t=document.createElement("a"),a=window.URL.createObjectURL(s);t.href=a,t.download="all_exalted_characters.json",t.style.display="none",document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),window.URL.revokeObjectURL(a)},100)}catch(e){console.error("Export error:",e),alert("Failed to export characters. Please try again.")}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2",children:[(0,a.jsx)(x,{size:18}),"Export All Characters"]})]}),(0,a.jsxs)("div",{className:"mb-8 p-6 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create New Character"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"text",value:ey,onChange:e=>ej(e.target.value),placeholder:"Character name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&eS()}),(0,a.jsxs)("button",{onClick:eS,disabled:!ey.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[(0,a.jsx)(u,{size:18}),"Create"]})]})]}),ex.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select Character"}),(0,a.jsx)("div",{className:"grid gap-3",children:ex.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m,{size:20,className:"text-gray-600"}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{ep(e),eb(!1)},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1",children:[(0,a.jsx)(h,{size:14}),"Select"]}),(0,a.jsxs)("button",{onClick:()=>eB(e),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[(0,a.jsx)(x,{size:14}),"Export"]}),(0,a.jsxs)("button",{onClick:()=>(e=>{eu(s=>s.filter(s=>s.id!==e)),eh&&eh.id===e&&(ep(null),eb(!0))})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 flex items-center gap-1",children:[(0,a.jsx)(p,{size:14}),"Delete"]})]})]},e.id))})]})]})});let ss=e=>{let{label:s,stat:t,section:l,statKey:n}=e;return(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium text-gray-700",children:s}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:t.base,onChange:e=>eT(l,n,"base",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"attributes"===l?"1":"0",max:"5"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:t.added,onChange:e=>{eT(l,n,"added",Math.min(Math.max(0,5-t.base),Math.max(0,parseInt(e.target.value)||0)))},className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:Math.max(0,5-t.base)})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:t.bonus,onChange:e=>eT(l,n,"bonus",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3 font-bold text-blue-600 text-center",children:eR(t)})]})},st=e=>{let{label:s,stat:t,statKey:l}=e;return(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium text-gray-700 text-sm",children:s}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:t.base,onChange:e=>eT("abilities",l,"base",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:"5"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:t.added,onChange:e=>{eT("abilities",l,"added",Math.min(Math.max(0,5-t.base),Math.max(0,parseInt(e.target.value)||0)))},className:"w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:Math.max(0,5-t.base)})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:t.bonus,onChange:e=>eT("abilities",l,"bonus",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3 font-bold text-blue-600 text-center text-sm",children:(e=>{var s,t;let a=null==eh||null==(s=eh.abilities)?void 0:s[e];if(!a)return 0;let l=eR(a);if(!eC||"none"===eC)return l;let n=null==eh||null==(t=eh.attributes)?void 0:t[eC];return n?l+eR(n):l})(l)})]})},sa=[{id:"core",label:"Core Stats",icon:m},{id:"combat",label:"Combat",icon:g},{id:"equipment",label:"Equipment",icon:b},{id:"powers",label:"Powers",icon:y},{id:"socials",label:"Socials",icon:j},{id:"advancement",label:"Advancement",icon:v},{id:"rulings",label:"Rulings",icon:f},{id:"wip",label:"WIP",icon:N}],sl=["Compassion","Courage","Discipline","Justice","Loyalty","Wonder"];return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:eh.name}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>eA(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"About"}),(0,a.jsxs)("button",{onClick:()=>eB(eh),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[(0,a.jsx)(x,{size:18}),"Export"]}),(0,a.jsxs)("button",{onClick:()=>{var e;return null==(e=eD.current)?void 0:e.click()},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2",children:[(0,a.jsx)(o,{size:18}),"Import"]}),(0,a.jsx)("input",{ref:eD,type:"file",accept:".json",onChange:eE,className:"hidden"}),(0,a.jsxs)("button",{onClick:()=>eb(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center gap-2",children:[(0,a.jsx)(m,{size:18}),"Switch Character"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-t-lg shadow-lg",children:(0,a.jsx)("div",{className:"flex flex-wrap border-b",children:sa.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>ew(e.id),className:"flex items-center gap-2 px-6 py-3 font-medium transition-colors ".concat(eN===e.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"),children:[(0,a.jsx)(s,{size:18}),e.label]},e.id)})})}),(0,a.jsxs)("div",{className:"bg-white rounded-b-lg shadow-lg p-6",children:["core"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Essence"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Rating:"}),(0,a.jsx)("input",{type:"number",value:eh.essence.rating,onChange:e=>ez("rating",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500 font-bold text-lg",min:"1",max:"10"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Motes"}),(0,a.jsx)("input",{type:"number",value:eh.essence.motes,onChange:e=>ez("motes",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Commitments"}),(0,a.jsx)("input",{type:"number",value:eh.essence.commitments,onChange:e=>ez("commitments",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Spent"}),(0,a.jsx)("input",{type:"number",value:eh.essence.spent,onChange:e=>ez("spent",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"border-t pt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-blue-600",children:"Remain"}),(0,a.jsx)("span",{className:"font-bold text-blue-600",children:eL()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-green-600",children:"Open"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:eO()})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Anima"}),(0,a.jsx)("input",{type:"number",value:eh.essence.anima,onChange:e=>ez("anima",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:"10"})]}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-purple-600",children:"Anima Level"}),(0,a.jsx)("span",{className:"font-bold text-purple-600",children:eV((null==eh||null==(e=eh.essence)?void 0:e.anima)||0)})]}),eK((null==eh||null==(s=eh.essence)?void 0:s.anima)||0).length>0&&(0,a.jsxs)("div",{className:"bg-purple-50 p-2 rounded",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Active Effects:"}),eK((null==eh||null==(t=eh.essence)?void 0:t.anima)||0).map((e,s)=>(0,a.jsxs)("div",{className:"text-sm text-purple-600",children:["• ",e]},s))]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Attributes"}),(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Attribute"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Base"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Added"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Bonus"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Total"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsx)(ss,{label:"Fortitude",stat:eh.attributes.fortitude,section:"attributes",statKey:"fortitude"}),(0,a.jsx)(ss,{label:"Finesse",stat:eh.attributes.finesse,section:"attributes",statKey:"finesse"}),(0,a.jsx)(ss,{label:"Force",stat:eh.attributes.force,section:"attributes",statKey:"force"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-500 italic",children:"Note: Base + Added cannot exceed 5 for any attribute"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Abilities"}),(0,a.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border border-gray-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Attribute to All Abilities:"}),(0,a.jsx)("div",{className:"flex gap-2",children:["none","fortitude","finesse","force"].map(e=>(0,a.jsx)("button",{onClick:()=>ek(e),className:"px-4 py-2 rounded font-medium transition-colors ".concat(eC===e?"none"===e?"bg-gray-600 text-white":"fortitude"===e?"bg-red-600 text-white":"finesse"===e?"bg-blue-600 text-white":"bg-green-600 text-white":"bg-gray-100 hover:bg-gray-200"),children:"none"===e?"None":e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left text-sm",children:"Ability"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center text-sm",children:"Base"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center text-sm",children:"Added"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center text-sm",children:"Bonus"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center text-sm",children:"Total"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsx)(st,{label:"Athletics",stat:eh.abilities.athletics,statKey:"athletics"}),(0,a.jsx)(st,{label:"Awareness",stat:eh.abilities.awareness,statKey:"awareness"}),(0,a.jsx)(st,{label:"Close Combat",stat:eh.abilities.closeCombat,statKey:"closeCombat"}),(0,a.jsx)(st,{label:"Craft",stat:eh.abilities.craft,statKey:"craft"}),(0,a.jsx)(st,{label:"Embassy",stat:eh.abilities.embassy,statKey:"embassy"}),(0,a.jsx)(st,{label:"Integrity",stat:eh.abilities.integrity,statKey:"integrity"}),(0,a.jsx)(st,{label:"Navigate",stat:eh.abilities.navigate,statKey:"navigate"}),(0,a.jsx)(st,{label:"Physique",stat:eh.abilities.physique,statKey:"physique"}),(0,a.jsx)(st,{label:"Presence",stat:eh.abilities.presence,statKey:"presence"}),(0,a.jsx)(st,{label:"Performance",stat:eh.abilities.performance,statKey:"performance"}),(0,a.jsx)(st,{label:"Ranged Combat",stat:eh.abilities.rangedCombat,statKey:"rangedCombat"}),(0,a.jsx)(st,{label:"Sagacity",stat:eh.abilities.sagacity,statKey:"sagacity"}),(0,a.jsx)(st,{label:"Stealth",stat:eh.abilities.stealth,statKey:"stealth"}),(0,a.jsx)(st,{label:"War",stat:eh.abilities.war,statKey:"war"})]})]})}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-500 italic",children:"Note: Base + Added cannot exceed 5 for any ability"})]})]})]}),"combat"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Essence"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Rating:"}),(0,a.jsx)("input",{type:"number",value:eh.essence.rating,onChange:e=>ez("rating",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500 font-bold text-lg",min:"1",max:"10"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Motes"}),(0,a.jsx)("input",{type:"number",value:eh.essence.motes,onChange:e=>ez("motes",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Commitments"}),(0,a.jsx)("input",{type:"number",value:eh.essence.commitments,onChange:e=>ez("commitments",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Spent"}),(0,a.jsx)("input",{type:"number",value:eh.essence.spent,onChange:e=>ez("spent",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"border-t pt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-blue-600",children:"Remain"}),(0,a.jsx)("span",{className:"font-bold text-blue-600",children:eL()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-green-600",children:"Open"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:eO()})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"font-medium text-gray-700",children:"Anima"}),(0,a.jsx)("input",{type:"number",value:eh.essence.anima,onChange:e=>ez("anima",e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:"10"})]}),(0,a.jsxs)("div",{className:"border-t pt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-purple-600",children:"Anima Level"}),(0,a.jsx)("span",{className:"font-bold text-purple-600",children:eV((null==eh||null==(n=eh.essence)?void 0:n.anima)||0)})]}),eK((null==eh||null==(r=eh.essence)?void 0:r.anima)||0).length>0&&(0,a.jsxs)("div",{className:"bg-purple-50 p-2 rounded",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Active Effects:"}),eK((null==eh||null==(i=eh.essence)?void 0:i.anima)||0).map((e,s)=>(0,a.jsxs)("div",{className:"text-sm text-purple-600",children:["• ",e]},s))]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Combat Rolls"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Join Battle"}),(0,a.jsxs)("div",{className:"p-3 bg-white rounded",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Best Attribute + Best of Close/Ranged Combat + Bonus"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm",children:"Bonus Modifier"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(d=eh.combat)?void 0:d.joinBattleBonus)||0,onChange:e=>e4("joinBattleBonus",e.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-blue-100 rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:(()=>{var e,s,t;let a=eW();return a+Math.max(eR((null==eh||null==(e=eh.abilities)?void 0:e.closeCombat)||{base:0,added:0,bonus:0}),eR((null==eh||null==(s=eh.abilities)?void 0:s.rangedCombat)||{base:0,added:0,bonus:0}))+((null==eh||null==(t=eh.combat)?void 0:t.joinBattleBonus)||0)})()}),(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"Join Battle Pool"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Power Tracker"}),(0,a.jsxs)("div",{className:"p-3 bg-white rounded",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Track power gained from attacks"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>{var e;return e4("power",Math.max(0,((null==eh||null==(e=eh.combat)?void 0:e.power)||0)-1))},className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"-"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-800 w-16 text-center",children:(null==eh||null==(c=eh.combat)?void 0:c.power)||0}),(0,a.jsx)("button",{onClick:()=>{var e;return e4("power",((null==eh||null==(e=eh.combat)?void 0:e.power)||0)+1)},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"+"})]})]})]})]}),((null==eh?void 0:eh.weapons)||[]).length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-3",children:"Weapon Combat Rolls"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Weapon"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Range"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Attack Pool"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Damage Pool"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Overwhelming"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Defense Bonus"})]})}),(0,a.jsx)("tbody",{children:eh.weapons.map(e=>{let s="close"===e.range,t=eR(eh.abilities[s?"closeCombat":"rangedCombat"]||{base:0,added:0,bonus:0}),l=eW()+t+(parseInt(e.accuracy)||0),n=parseInt(e.damage)||0;return(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium",children:e.name||"Unnamed Weapon"}),(0,a.jsx)("td",{className:"py-2 px-3 text-center capitalize",children:e.range||"close"}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold text-blue-600",children:l}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold text-red-600",children:n}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:e.overwhelming||0}),(0,a.jsxs)("td",{className:"py-2 px-3 text-center",children:["+",e.defence||0]})]},e.id)})})]})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Static Values"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(()=>{var e;return Math.max(0,Math.max(eH(),eF())+Math.max(-5,Math.min(5,(null==eh||null==(e=eh.staticValues)?void 0:e.defenseModifier)||0)))})()}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Defense"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center",children:(0,a.jsx)("div",{children:"Max of Evasion/Parry"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Mod:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(k=eh.staticValues)?void 0:k.defenseModifier)||0,onChange:e=>e1("defenseModifier",e.target.value),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",min:"-5",max:"5"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:eH()}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Evasion"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center",children:(0,a.jsx)("div",{children:"⌈(Athletics + Max Attr) / 2⌉"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Mod:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(M=eh.staticValues)?void 0:M.evasionModifier)||0,onChange:e=>e1("evasionModifier",e.target.value),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",min:"-5",max:"5"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:eF()}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Parry"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center",children:(0,a.jsx)("div",{children:"⌈(Close Combat + Max Attr) / 2⌉"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Mod:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(A=eh.staticValues)?void 0:A.parryModifier)||0,onChange:e=>e1("parryModifier",e.target.value),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",min:"-5",max:"5"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:eU()}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Resolve"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center",children:(0,a.jsx)("div",{children:"2 + Integrity bonuses"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Mod:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(P=eh.staticValues)?void 0:P.resolveModifier)||0,onChange:e=>e1("resolveModifier",e.target.value),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",min:"-5",max:"5"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:(()=>{var e,s;if(!(null==eh||null==(e=eh.abilities)?void 0:e.physique))return 1;let t=eR(eh.abilities.physique),a=1;return t>=3&&(a+=1),Math.max(0,a+eZ()+Math.max(-5,Math.min(5,(null==eh||null==(s=eh.staticValues)?void 0:s.soakModifier)||0)))})()}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Soak"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsx)("div",{children:"1 + Physique + Armor"}),(0,a.jsxs)("div",{children:["Armor: +",eZ()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Mod:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(D=eh.staticValues)?void 0:D.soakModifier)||0,onChange:e=>e1("soakModifier",e.target.value),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",min:"-5",max:"5"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(()=>{var e,s;let t=(null==eh||null==(e=eh.essence)?void 0:e.rating)||1;return Math.max(0,t+2+e$()+Math.max(-5,Math.min(5,(null==eh||null==(s=eh.staticValues)?void 0:s.hardnessModifier)||0)))})()}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Hardness"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[(0,a.jsx)("div",{children:"Essence + 2 + Armor"}),(0,a.jsxs)("div",{children:["Armor: +",e$()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600",children:"Mod:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(I=eh.staticValues)?void 0:I.hardnessModifier)||0,onChange:e=>e1("hardnessModifier",e.target.value),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",min:"-5",max:"5"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Health Track"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Exalt Type:"}),(0,a.jsx)("select",{value:(null==eh||null==(S=eh.health)?void 0:S.exaltType)||"lunar",onChange:e=>eQ("exaltType",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:(0,a.jsx)("option",{value:"lunar",children:"Lunar"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Ox Body:"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(B=eh.health)?void 0:B.oxBodyLevels)||0,onChange:e=>eQ("oxBodyLevels",Math.max(0,Math.min(5,parseInt(e.target.value)||0))),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:"5"})]})]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-4 p-3 bg-white rounded",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Health Levels"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{children:["0: ",(0,a.jsx)("span",{className:"font-bold",children:e_().zero})]}),(0,a.jsxs)("div",{children:["-1: ",(0,a.jsx)("span",{className:"font-bold",children:e_().minusOne})]}),(0,a.jsxs)("div",{children:["-2: ",(0,a.jsx)("span",{className:"font-bold",children:e_().minusTwo})]}),(0,a.jsx)("div",{children:"Incap"})]}),(0,a.jsx)("div",{className:"mt-2 pt-2 border-t",children:(0,a.jsxs)("div",{children:["Total: ",(0,a.jsx)("span",{className:"font-bold",children:e_().total})]})})]}),(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-50 rounded",children:[(0,a.jsx)("h3",{className:"font-semibold text-red-700 mb-2",children:"Current Penalty"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600 text-center",children:-99===eJ()?"Incapacitated":eJ()})]}),(0,a.jsxs)("div",{className:"p-3 bg-white rounded",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Damage Taken"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Bashing"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(E=eh.health)?void 0:E.bashingDamage)||0,onChange:e=>eQ("bashingDamage",Math.max(0,parseInt(e.target.value)||0)),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Lethal"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(T=eh.health)?void 0:T.lethalDamage)||0,onChange:e=>eQ("lethalDamage",Math.max(0,parseInt(e.target.value)||0)),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Aggravated"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(z=eh.health)?void 0:z.aggravatedDamage)||0,onChange:e=>eQ("aggravatedDamage",Math.max(0,parseInt(e.target.value)||0)),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Dramatic Injuries"}),(0,a.jsxs)("button",{onClick:()=>{var e;if(!eh)return;let s={id:Date.now(),description:"",healed:!1};eQ("dramaticInjuries",[...(null==(e=eh.health)?void 0:e.dramaticInjuries)||[],s])},className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm flex items-center gap-1",children:[(0,a.jsx)(u,{size:14}),"Add Injury"]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[((null==eh||null==(R=eh.health)?void 0:R.dramaticInjuries)||[]).map(e=>(0,a.jsxs)("div",{className:"p-2 rounded border flex items-center gap-2 ".concat(e.healed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsx)("input",{type:"text",value:e.description,onChange:s=>((e,s,t)=>{var a;(null==eh||null==(a=eh.health)?void 0:a.dramaticInjuries)&&eQ("dramaticInjuries",eh.health.dramaticInjuries.map(a=>a.id===e?{...a,[s]:t}:a))})(e.id,"description",s.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Injury description..."}),(0,a.jsx)("button",{onClick:()=>(e=>{var s;(null==eh||null==(s=eh.health)?void 0:s.dramaticInjuries)&&eQ("dramaticInjuries",eh.health.dramaticInjuries.map(s=>s.id===e?{...s,healed:!s.healed}:s))})(e.id),className:"px-2 py-1 rounded text-xs ".concat(e.healed?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"),children:e.healed?"Reopen":"Heal"}),(0,a.jsx)("button",{onClick:()=>(e=>{var s;(null==eh||null==(s=eh.health)?void 0:s.dramaticInjuries)&&eQ("dramaticInjuries",eh.health.dramaticInjuries.filter(s=>s.id!==e))})(e.id),className:"px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs",children:(0,a.jsx)(p,{size:12})})]},e.id)),0===((null==eh||null==(L=eh.health)?void 0:L.dramaticInjuries)||[]).length&&(0,a.jsx)("p",{className:"text-gray-500 italic text-sm",children:"No dramatic injuries recorded."})]})]})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Dice Pool Calculator"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-3",children:"Pool Assembly"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Attribute"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>e5("attribute","fortitude"),className:"flex-1 px-3 py-2 rounded text-sm font-medium transition-colors ".concat((null==eh||null==(O=eh.dicePool)?void 0:O.attribute)==="fortitude"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-red-100"),children:[(0,a.jsx)("div",{children:"Fortitude"}),(0,a.jsxs)("div",{className:"text-xs opacity-75",children:["(",eR((null==eh||null==(V=eh.attributes)?void 0:V.fortitude)||{base:0,added:0,bonus:0}),")"]})]}),(0,a.jsxs)("button",{onClick:()=>e5("attribute","finesse"),className:"flex-1 px-3 py-2 rounded text-sm font-medium transition-colors ".concat((null==eh||null==(K=eh.dicePool)?void 0:K.attribute)==="finesse"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-blue-100"),children:[(0,a.jsx)("div",{children:"Finesse"}),(0,a.jsxs)("div",{className:"text-xs opacity-75",children:["(",eR((null==eh||null==(q=eh.attributes)?void 0:q.finesse)||{base:0,added:0,bonus:0}),")"]})]}),(0,a.jsxs)("button",{onClick:()=>e5("attribute","force"),className:"flex-1 px-3 py-2 rounded text-sm font-medium transition-colors ".concat((null==eh||null==(W=eh.dicePool)?void 0:W.attribute)==="force"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-green-100"),children:[(0,a.jsx)("div",{children:"Force"}),(0,a.jsxs)("div",{className:"text-xs opacity-75",children:["(",eR((null==eh||null==(H=eh.attributes)?void 0:H.force)||{base:0,added:0,bonus:0}),")"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Ability"}),(0,a.jsx)("select",{value:(null==eh||null==(F=eh.dicePool)?void 0:F.ability)||"athletics",onChange:e=>e5("ability",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:Object.keys((null==eh?void 0:eh.abilities)||{}).map(e=>{var s;return(0,a.jsxs)("option",{value:e,children:[e.charAt(0).toUpperCase()+e.slice(1).replace(/([A-Z])/g," $1")," (",eR((null==eh||null==(s=eh.abilities)?void 0:s[e])||{base:0,added:0,bonus:0}),")"]},e)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Target Number"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(U=eh.dicePool)?void 0:U.targetNumber)||7,onChange:e=>e5("targetNumber",parseInt(e.target.value)||7),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1",max:"10"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Doubles Threshold"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(_=eh.dicePool)?void 0:_.doublesThreshold)||10,onChange:e=>e5("doublesThreshold",parseInt(e.target.value)||10),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1",max:"10"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-3",children:"Modifiers"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Extra Dice (Bonus)"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(J=eh.dicePool)?void 0:J.extraDiceBonus)||0,onChange:e=>e5("extraDiceBonus",Math.min(10,Math.max(0,parseInt(e.target.value)||0))),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:"10"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Max: 10"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Extra Dice (Non-Bonus)"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(X=eh.dicePool)?void 0:X.extraDiceNonBonus)||0,onChange:e=>e5("extraDiceNonBonus",Math.max(0,parseInt(e.target.value)||0)),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Extra Success (Bonus)"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==(Z=eh.dicePool)?void 0:Z.extraSuccessBonus)||0,onChange:e=>e5("extraSuccessBonus",Math.min(5,Math.max(0,parseInt(e.target.value)||0))),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",max:"5"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Max: 5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Extra Success (Non-Bonus)"}),(0,a.jsx)("input",{type:"number",value:(null==eh||null==($=eh.dicePool)?void 0:$.extraSuccessNonBonus)||0,onChange:e=>e5("extraSuccessNonBonus",Math.max(0,parseInt(e.target.value)||0)),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Dice Pool Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:"Base Pool"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-800",children:e6().basePool})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:"Extra Dice"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-800",children:["+",e6().extraDice]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:"Total Dice"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-800",children:e6().totalPool})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:"Extra Success"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-800",children:["+",((null==eh||null==(G=eh.dicePool)?void 0:G.extraSuccessBonus)||0)+((null==eh||null==(Q=eh.dicePool)?void 0:Q.extraSuccessNonBonus)||0)]})]})]}),(0,a.jsx)("div",{className:"text-center p-2 bg-blue-100 rounded font-medium text-blue-800",children:e6().actionPhrase})]})]})]}),"equipment"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Armor"}),(0,a.jsxs)("button",{onClick:()=>{if(!eh)return;let e={id:Date.now(),name:"",type:"light",soak:0,hardness:0,mobility:0,tags:""},s={...eh,armor:[...eh.armor||[],e]};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 flex items-center gap-1",children:[(0,a.jsx)(u,{size:16}),"Add Armor"]})]}),0===((null==eh?void 0:eh.armor)||[]).length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No armor equipped."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Type"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Soak"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Hardness"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Mobility"}),(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Tags"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:((null==eh?void 0:eh.armor)||[]).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.name,onChange:s=>eX(e.id,"name",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"Armor name..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("select",{value:e.type,onChange:s=>eX(e.id,"type",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",children:[(0,a.jsx)("option",{value:"light",children:"Light"}),(0,a.jsx)("option",{value:"heavy",children:"Heavy"})]})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.soak,onChange:s=>eX(e.id,"soak",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-gray-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.hardness,onChange:s=>eX(e.id,"hardness",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-gray-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.mobility,onChange:s=>eX(e.id,"mobility",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-gray-500"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.tags,onChange:s=>eX(e.id,"tags",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"Tags..."})}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,a.jsx)("button",{onClick:()=>(e=>{if(!(null==eh?void 0:eh.armor))return;let s={...eh,armor:eh.armor.filter(s=>s.id!==e)};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Weapons"}),(0,a.jsxs)("button",{onClick:()=>{if(!eh)return;let e={id:Date.now(),name:"",accuracy:0,damage:0,defence:0,overwhelming:0,range:"close",tags:""},s={...eh,weapons:[...eh.weapons||[],e]};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))},className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 flex items-center gap-1",children:[(0,a.jsx)(u,{size:16}),"Add Weapon"]})]}),0===((null==eh?void 0:eh.weapons)||[]).length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No weapons equipped."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Accuracy"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Damage"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Defence"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Overwhelming"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Range"}),(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Tags"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:((null==eh?void 0:eh.weapons)||[]).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.name,onChange:s=>eG(e.id,"name",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-red-500",placeholder:"Weapon name..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.accuracy,onChange:s=>eG(e.id,"accuracy",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-red-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.damage,onChange:s=>eG(e.id,"damage",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-red-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.defence,onChange:s=>eG(e.id,"defence",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-red-500"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:e.overwhelming,onChange:s=>eG(e.id,"overwhelming",parseInt(s.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-red-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("select",{value:e.range,onChange:s=>eG(e.id,"range",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-red-500",children:[(0,a.jsx)("option",{value:"close",children:"Close"}),(0,a.jsx)("option",{value:"short",children:"Short"}),(0,a.jsx)("option",{value:"mid",children:"Mid"}),(0,a.jsx)("option",{value:"long",children:"Long"})]})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.tags,onChange:s=>eG(e.id,"tags",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-red-500",placeholder:"Tags..."})}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,a.jsx)("button",{onClick:()=>(e=>{if(!(null==eh?void 0:eh.weapons))return;let s={...eh,weapons:eh.weapons.filter(s=>s.id!==e)};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Tag References"}),(0,a.jsx)("div",{className:"space-y-2",children:(()=>{let e=new Set;return[...(null==eh?void 0:eh.armor)||[],...(null==eh?void 0:eh.weapons)||[]].forEach(s=>{s.tags&&s.tags.split(",").forEach(s=>{let t=s.trim();t&&e.add(t)})}),Array.from(e).length>0?Array.from(e).sort().map((e,s)=>(0,a.jsxs)("div",{className:"p-2 bg-white rounded border border-gray-200",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:[String(e),":"]}),(0,a.jsx)("span",{className:"text-gray-600 ml-2",children:"(Placeholder reference)"})]},s)):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No tags to reference."})})()})]})]}),"powers"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Charms"}),(0,a.jsxs)("button",{onClick:()=>{if(!eh)return;let e={id:Date.now(),name:"",step:1,cost:"",description:"",pageReference:""},s={...eh,charms:[...eh.charms||[],e]};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))},className:"px-3 py-1 bg-amber-600 text-white rounded hover:bg-amber-700 flex items-center gap-1",children:[(0,a.jsx)(u,{size:16}),"Add Charm"]})]}),0===((null==eh?void 0:eh.charms)||[]).length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No charms yet."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Step"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Cost"}),(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Description"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Page"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:((null==eh?void 0:eh.charms)||[]).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.name,onChange:s=>e2(e.id,"name",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-amber-500",placeholder:"Charm name..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("select",{value:e.step,onChange:s=>e2(e.id,"step",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-amber-500",children:[(0,a.jsx)("option",{value:"none",children:"None"}),[1,2,3,4,5,6,7,8].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.cost,onChange:s=>e2(e.id,"cost",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-amber-500",placeholder:"Cost..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("textarea",{value:e.description,onChange:s=>e2(e.id,"description",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-amber-500 resize-none",placeholder:"Description...",rows:2})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.pageReference||"",onChange:s=>e2(e.id,"pageReference",s.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-amber-500",placeholder:"p.XX"})}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,a.jsx)("button",{onClick:()=>(e=>{if(!(null==eh?void 0:eh.charms))return;let s={...eh,charms:eh.charms.filter(s=>s.id!==e)};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Spells"}),(0,a.jsxs)("button",{onClick:()=>{if(!eh)return;let e={id:Date.now(),name:"",step:1,cost:"",description:"",pageReference:""},s={...eh,spells:[...eh.spells||[],e]};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))},className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-1",children:[(0,a.jsx)(u,{size:16}),"Add Spell"]})]}),0===((null==eh?void 0:eh.spells)||[]).length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No spells yet."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Name"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Step"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Cost"}),(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Description"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Page"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:((null==eh?void 0:eh.spells)||[]).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.name,onChange:s=>e3(e.id,"name",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Spell name..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("select",{value:e.step,onChange:s=>e3(e.id,"step",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"none",children:"None"}),[1,2,3,4,5,6,7,8].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.cost,onChange:s=>e3(e.id,"cost",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Cost..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("textarea",{value:e.description,onChange:s=>e3(e.id,"description",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none",placeholder:"Description...",rows:2})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.pageReference||"",onChange:s=>e3(e.id,"pageReference",s.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"p.XX"})}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,a.jsx)("button",{onClick:()=>(e=>{if(!(null==eh?void 0:eh.spells))return;let s={...eh,spells:eh.spells.filter(s=>s.id!==e)};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})})]},e.id))})]})})]})]}),"socials"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-xs text-blue-700",children:[(0,a.jsx)("div",{className:"font-semibold mb-1",children:"Social Influence Steps:"}),(0,a.jsx)("div",{children:"Step 1: The player declares her intention for the influence."}),(0,a.jsx)("div",{children:"Step 2: Form the dice pool for the action using an appropriate Attribute + Ability and adding any modifiers."}),(0,a.jsx)("div",{children:"Step 3: The target determines if any Virtues or Intimacies adjust his Resolve."}),(0,a.jsx)("div",{children:"Step 4: On success, the player utilizes extra successes to determine the extent of her influence action on the target. The target may choose to resist the social influence."}),(0,a.jsx)("div",{className:"mt-2 font-semibold",children:"Resolve Modifiers: Minor = \xb12, Major = \xb13. Minimum Resolve against social action = 1."})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:eU()}),(0,a.jsx)("div",{className:"text-lg font-medium text-gray-700",children:"Base Resolve"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"Before Virtue/Intimacy modifiers"})]})}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Virtues"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Major Virtue"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:sl.map(e=>{var s,t,l,n;let r=(null==eh||null==(t=eh.social)||null==(s=t.virtues)?void 0:s.major)===e,i=(null==eh||null==(n=eh.social)||null==(l=n.virtues)?void 0:l.minor)===e;return(0,a.jsx)("button",{onClick:()=>!i&&e7("major",r?null:e),disabled:i,className:"px-4 py-2 rounded font-medium transition-colors ".concat(r?"bg-purple-600 text-white hover:bg-purple-700":i?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Minor Virtue"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:sl.map(e=>{var s,t,l,n;let r=(null==eh||null==(t=eh.social)||null==(s=t.virtues)?void 0:s.minor)===e,i=(null==eh||null==(n=eh.social)||null==(l=n.virtues)?void 0:l.major)===e;return(0,a.jsx)("button",{onClick:()=>!i&&e7("minor",r?null:e),disabled:i,className:"px-4 py-2 rounded font-medium transition-colors ".concat(r?"bg-blue-600 text-white hover:bg-blue-700":i?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e)})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Intimacies"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Ties"}),(0,a.jsxs)("button",{onClick:()=>e8("Tie"),className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center gap-1 text-sm",children:[(0,a.jsx)(u,{size:14}),"Add Tie"]})]}),0===((null==eh||null==(Y=eh.social)?void 0:Y.intimacies)||[]).filter(e=>"Tie"===e.type).length?(0,a.jsx)("p",{className:"text-gray-500 italic text-sm",children:"No ties yet."}):(0,a.jsx)("div",{className:"space-y-2",children:((null==eh||null==(ee=eh.social)?void 0:ee.intimacies)||[]).filter(e=>"Tie"===e.type).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:e.intimacy,onChange:s=>e9(e.id,"intimacy",s.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",placeholder:"Tie description..."}),(0,a.jsxs)("select",{value:e.strength,onChange:s=>e9(e.id,"strength",s.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"Minor",children:"Minor"}),(0,a.jsx)("option",{value:"Major",children:"Major"})]}),(0,a.jsx)("button",{onClick:()=>se(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Principles"}),(0,a.jsxs)("button",{onClick:()=>e8("Principle"),className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center gap-1 text-sm",children:[(0,a.jsx)(u,{size:14}),"Add Principle"]})]}),0===((null==eh||null==(es=eh.social)?void 0:es.intimacies)||[]).filter(e=>"Principle"===e.type).length?(0,a.jsx)("p",{className:"text-gray-500 italic text-sm",children:"No principles yet."}):(0,a.jsx)("div",{className:"space-y-2",children:((null==eh||null==(et=eh.social)?void 0:et.intimacies)||[]).filter(e=>"Principle"===e.type).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:e.intimacy,onChange:s=>e9(e.id,"intimacy",s.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",placeholder:"Principle description..."}),(0,a.jsxs)("select",{value:e.strength,onChange:s=>e9(e.id,"strength",s.target.value),className:"px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"Minor",children:"Minor"}),(0,a.jsx)("option",{value:"Major",children:"Major"})]}),(0,a.jsx)("button",{onClick:()=>se(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})]},e.id))})]})]})]}),"advancement"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Milestone Budget"}),(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Type"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Personal"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Exalt"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Minor"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Major"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium",children:"Accrued"}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:(null==eh||null==(ea=eh.milestones)?void 0:ea.personal)||0,onChange:e=>e0("personal",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:(null==eh||null==(el=eh.milestones)?void 0:el.exalt)||0,onChange:e=>e0("exalt",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-purple-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:(null==eh||null==(en=eh.milestones)?void 0:en.minor)||0,onChange:e=>e0("minor",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-green-500",min:"0"})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"number",value:(null==eh||null==(er=eh.milestones)?void 0:er.major)||0,onChange:e=>e0("major",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-red-500",min:"0"})})]}),(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium",children:"Spent"}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold text-blue-600",children:eY().personal}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold text-purple-600",children:eY().exalt}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold text-green-600",children:eY().minor}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold text-red-600",children:eY().major})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium",children:"Remaining"}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold",children:((null==eh||null==(ei=eh.milestones)?void 0:ei.personal)||0)-eY().personal}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold",children:((null==eh||null==(ed=eh.milestones)?void 0:ed.exalt)||0)-eY().exalt}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold",children:((null==eh||null==(ec=eh.milestones)?void 0:ec.minor)||0)-eY().minor}),(0,a.jsx)("td",{className:"py-2 px-3 text-center font-bold",children:((null==eh||null==(eo=eh.milestones)?void 0:eo.major)||0)-eY().major})]})]})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Planned Advancements: ",(0,a.jsx)("span",{className:"font-bold",children:eY().planned})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("button",{onClick:()=>ef(!ev),className:"flex items-center gap-2 text-xl font-bold text-gray-800 hover:text-gray-900",children:[ev?(0,a.jsx)(w,{size:20}):(0,a.jsx)(C,{size:20}),"Advancement Log (",((null==eh?void 0:eh.advancement)||[]).length," entries)"]}),(0,a.jsxs)("button",{onClick:()=>{if(!eh)return;let e={id:Date.now(),item:"",status:"Planned",timestamp:new Date().toLocaleDateString()},s={...eh,advancement:[...eh.advancement||[],e]};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1",children:[(0,a.jsx)(u,{size:16}),"Add Entry"]})]}),ev&&(0,a.jsx)("div",{children:0===((null==eh?void 0:eh.advancement)||[]).length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No advancement entries yet."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"py-2 px-3 text-left",children:"Item"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Status"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Date"}),(0,a.jsx)("th",{className:"py-2 px-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:((null==eh?void 0:eh.advancement)||[]).map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsx)("input",{type:"text",value:e.item,onChange:s=>eq(e.id,"item",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Advancement item..."})}),(0,a.jsx)("td",{className:"py-2 px-3",children:(0,a.jsxs)("select",{value:e.status,onChange:s=>eq(e.id,"status",s.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Planned",children:"Planned"}),(0,a.jsx)("option",{value:"Paid with Personal",children:"Paid with Personal"}),(0,a.jsx)("option",{value:"Paid with Exalt",children:"Paid with Exalt"}),(0,a.jsx)("option",{value:"Paid with Minor",children:"Paid with Minor"}),(0,a.jsx)("option",{value:"Initial",children:"Initial"}),(0,a.jsx)("option",{value:"Paid with Major",children:"Paid with Major"})]})}),(0,a.jsx)("td",{className:"py-2 px-3 text-center text-sm text-gray-600",children:e.timestamp}),(0,a.jsx)("td",{className:"py-2 px-3 text-center",children:(0,a.jsx)("button",{onClick:()=>(e=>{if(!(null==eh?void 0:eh.advancement))return;let s={...eh,advancement:eh.advancement.filter(s=>s.id!==e)};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})})]},e.id))})]})})})]})]}),"rulings"===eN&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Character-Specific Rulings"}),(0,a.jsxs)("button",{onClick:()=>{if(!eh)return;let e={id:Date.now(),text:"",date:new Date().toLocaleDateString()},s={...eh,rulings:[...eh.rulings||[],e]};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 flex items-center gap-1",children:[(0,a.jsx)(u,{size:16}),"Add Ruling"]})]}),0===((null==eh?void 0:eh.rulings)||[]).length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No rulings recorded yet."}):(0,a.jsx)("div",{className:"space-y-2",children:((null==eh?void 0:eh.rulings)||[]).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-white rounded border border-gray-200",children:[(0,a.jsx)("textarea",{value:e.text,onChange:s=>((e,s)=>{if(!eh)return;let t={...eh,rulings:(eh.rulings||[]).map(t=>t.id===e?{...t,text:s}:t)};ep(t),eu(e=>e.map(e=>e.id===eh.id?t:e))})(e.id,s.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500 resize-none",placeholder:"Enter ruling text...",rows:2}),(0,a.jsx)("div",{className:"text-xs text-gray-500 whitespace-nowrap pt-1",children:e.date}),(0,a.jsx)("button",{onClick:()=>(e=>{if(!eh)return;let s={...eh,rulings:(eh.rulings||[]).filter(s=>s.id!==e)};ep(s),eu(e=>e.map(e=>e.id===eh.id?s:e))})(e.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:(0,a.jsx)(p,{size:14})})]},e.id))})]})}),"wip"===eN&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 text-sm text-yellow-800",children:[(0,a.jsx)("div",{className:"font-semibold mb-1",children:"Work In Progress"}),(0,a.jsx)("div",{children:"This tab contains experimental features that are still being developed."})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Combat Turn Steps"}),(0,a.jsx)("div",{className:"space-y-3",children:[{step:1,defaultActions:["Move","Decisive Attack","Withering Attack","Activate Excellence"]},{step:2,defaultActions:[]},{step:3,defaultActions:[]},{step:4,defaultActions:[]},{step:5,defaultActions:[]},{step:6,defaultActions:[]},{step:7,defaultActions:[]},{step:8,defaultActions:[]}].map(e=>(0,a.jsxs)("div",{className:"p-3 bg-white rounded border border-gray-200",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-700 mb-2",children:["Step ",e.step]}),(0,a.jsx)("div",{className:"space-y-1",children:e.defaultActions.map((e,s)=>(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["• ",e]},s))})]},e.step))}),(0,a.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:"Note: This component will eventually allow dynamic addition of available actions per step based on character abilities and current combat situation."})]})]})]})]})}},6833:(e,s,t)=>{Promise.resolve().then(t.bind(t,191))}},e=>{e.O(0,[441,964,358],()=>e(e.s=6833)),_N_E=e.O()}]);